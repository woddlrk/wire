<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        @import url(https://qwerewqwerew.github.io/source/style/reset.css);

        .cont {
            overflow: hidden;
        }

        .item {
            width: clamp(50%, 100%, 100%);
            height: 100vh;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5vw;
        }

        .item:nth-child(2n) {
            background-color: gray;
        }

        .num {
            position: absolute;
            right: 20px;
            bottom: 20px;
            font-size: 5vw;
            line-height: 1;
        }

        .box {
            width: 10vw;
            height: 10vw;
            background-color: #ff1515;
            background-size: cover;
            background-position: center;
        }

        .active .box {
            filter: hue-rotate(100deg);
        }

        .active {
            background: linear-gradient(yellow, purple);
        }
    </style>
</head>

<body>
    <main class="cont">
        <section class="sec1 item">
            <h2 class="num">01</h2>
            <div class="box"></div>
        </section>
        <!-- //.sec1 -->
        <section class="sec2 item">
            <h2 class="num">02</h2>
            <div class="box"></div>
        </section>
        <!-- //.sec2 -->
        <section class="sec3 item">
            <h2 class="num">03</h2>
            <div class="box"></div>
        </section>
        <!-- //.sec3 -->
        <section class="sec4 item">
            <h2 class="num">04</h2>
            <div class="box"></div>
        </section>
        <!-- //.sec4 -->
        <section class="sec5 item">
            <h2 class="num">05</h2>
            <div class="box"></div>
        </section>
        <!-- //.sec5 -->
        <section class="sec6 item">
            <h2 class="num">06</h2>
            <div class="box"></div>
        </section>
        <!-- //.sec6 -->
        <section class="sec7 item">
            <h2 class="num">07</h2>
            <div class="box box7"></div>
        </section>
        <!-- //.sec7 -->
        <section class="sec8 item">
            <h2 class="num">08</h2>
            <div class="box"></div>
        </section>
        <!-- //.sec8 -->
         <section class="item"></section>
         <section class="item"></section>
         <section class="item"></section>
    </main>
    <!-- gsap CDN -->
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/ScrollTrigger.min.js"></script>
    <script>
        const box1 = document.querySelector('.sec1 .box');
        const box2 = document.querySelector('.sec2 .box');
        const box3 = document.querySelector('.sec3 .box');
        const box4 = document.querySelector('.sec4 .box');
        const box5 = document.querySelector('.sec5 .box');
        const box6 = document.querySelector('.sec6 .box');
        const box7 = document.querySelector('.sec7 .box');
        const box8 = document.querySelector('.sec8 .box');
        const box9 = document.querySelector('.sec9 .box');
        // box1
        gsap.to(box1, {
            duration: 2,
            x: 500,
            borderRadius: 100,
            rotation: 360
        })
        // box2
        gsap.fromTo(box2, {
            // 시작상태
            x: '-100vw',
        }, {
            // 끝상태
            duration: 2,
            x: 500,
            borderRadius: 100,
            rotation: 360,
            backgroundColor: 'yellow',
            // 스크롤 이벤트를 감지해서 box2가 뷰포트에 진입시 애니메이션 실행
            scrollTrigger: {
                trigger: box2
            }
        })
        // box3
        gsap.to(box3, {
            duration: 2, x: 500, rotation: 360, borderRadius: 100,
            scrollTrigger: {
                trigger: box3,
                // toggleActions:'onEnter onLeave onEnterBack onLeaveBack'
                toggleActions: 'play none reverse none'
            }
        })
        // box4
        gsap.to(box4, {
            duration: 2, x: 500, rotation: 360,
            borderRadius: 100, scrollTrigger: {
                trigger: box4,
                // markers: true,
                start: 'top 50%',
                end: 'bottom 20%'
            }
        })
        // box5
        gsap.to(box5, {
            duration: 2,
            x: 500,
            rotation: 360,
            borderRadius: 100,
            scrollTrigger: {
                trigger: box5,
                start: 'top 50%',
                end: 'bottom 20%',
                scrub: true
            }
        })
        // box6
        gsap.to(box6, {
            duration: 2,
            x: 500,
            rotation: 360,
            borderRadius: 100,
            scrollTrigger: {
                trigger: '.sec6',
                // trigger: 'box6',
                // start: 'top 50%',
                // end:'bottom 200px',
                scrub: true,
                pin: true,
                markers: false,
            }
        })
        // box7
        gsap.to(box7, {
            duration: 2,
            x: 500,
            rotation: 360,
            borderRadius: 100,
            scrollTrigger: {
                trigger: '.sec7',
                markers: false,
                id: 'sec7',
                start: 'top center',
                end: 'bottom top',
                toggleClass: 'active'
            }
        })
        // box8
        gsap.to(box8, {
            duration: 2,
            x: 500,
            rotation: 360,
            borderRadius: 100,
            scrollTrigger: {
                trigger: box8,
                scrub: true,
                onEnter: () => {
                    document.querySelector('.sec8').style.backgroundColor = 'skyblue';
                },
                onLeave: () => {
                    document.querySelector('.sec8').style.backgroundColor = 'pink';
                },
                onEnterBack:()=> {
                    console.log('다시옴');
                },
                onLeaveBack:()=> {
                    console.log("다시왔다감");
                },
            
            onUpdate: (self) => {
                console.log(self);
                myAny(self.isActive);
            }
        }
        })
        function myAny(a) {
            const txt = document.createElement ('span');
            txt.textContent = a;
            box8.parentNode.appendChild(txt);
        }
    </script>
</body>

</html>